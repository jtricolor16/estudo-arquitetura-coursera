# Arquitetura em Camadas

Tipo de arquitetura voltado para reduzir o acoplamento entre os compontentes e deixar o sistema bem segmentado no que tange à responsabilidade de cada camada. Aconselha-se que uma camada só possa se comunicar entre ela mesmo e entre no máximo duas (uma mais abaixo e outra acima). Esse é o tipo de estrutura utilizada, por exemplo, na estruturação de um sistema operacional. Nele, temos 3 camadas bem definidas: kernel (ligação entre o SO e o hardware), bibliotecas do sistema (possibilita uma interface entre clients e aplicações a serem instaladas no SO) e a camada de aplicações, que é aquela a qual o usuário tem acesso e interage de fato com o SO.

Como já mencionado, a principal vantagem desse tipo arquitetural é a organização entre os componentes. Reduzir o acoplamento e deixar tudo segmentado por responsabilidades faz com que a estrutura se torne mais facilmente assimilável por quem irá dar manutenção no projeto, além de deixar claro quem tem permissão de fazer o quê de acordo com concessões ofertadas a nível de camadas.

Em alguns casos, pode ser necessário analisar se de fato faz sentido seguir a regra de que uma camada só pode interagir com ela e mais duas. Muitas vezes, é comum que um determinado componente da camada funcione apenas como um elo entre uma outra inacessível pela requisitora. Nesse caso, faz sentido balancear se o acréscimo do nível de acoplamento da plataforma pode tornar o processo mais performático ou até mesmo compreensível. Na explicação apresentada pelo curso, essa abordagem foi exemplificada utilizando uma simples estrutura em camadas de uma escola; na qual estudantes só interagiriam com professores e consigo próprios, professores com estudantes, diretores, além dos próprios mestres e diretores com eles próprios e com os educadores. Agora, imagina que o diretor deseja comunicar algo a todos os alunos. Respeitando a arquitetura definida, ele sempre teria de passar a informação para os professores que atuariam como mensageiros para os alunos. Desempenhando basicamente esta única funcionalidade nesse caso. Em situações desse tipo, talvez faça sentido criar uma interface direta entre estudantes e diretores. Como já menionado, isso dependerá de cada caso e do bom senso do arquiteto.

## N-Tier (Camadas no nível protocolar)

A arquitetura n-tier segue uma lógica semelhante à de camadas. No entanto, aqui, a preocupação maior é em estruturar a comunicação entre componentes que nem sempre fazem parte do mesmo contexto, ou seja, no nível de comunicação entre componentes que muitas vezes não estão no mesmo sistema ou máquina. Uma abordagem muito comum é a relação entre cliente-servidor.

A arquitetura cliente-servidor faz uso do padrão request-response. Ele fica evidente quando um cliente requisita alguma informação ao servidor, que devolverá os dados necessários na resposta. O uso deste tipo de abordagem possibilita um desacoplamento, no qual, diferentemente da arquitetura em camadas, os componentes de uma camada (tier) se comunicarão com a subsequente, não interagindo entre si.

A escalabilidade da solução é outro ponto favorável desta arquitetura. O acréscimo de clientes pode ser feito de forma simplificada, utlizando mais uma aplicação, quando o processo se dá na mesma máquina, ou aumentando a quantidade de dispositivos conectados ao servidor, quando a implementação se dá em máquinas distintas. No caso do servidor, bastaria aumentar o poder computacional através do acréscimo de memória ou mais capacidade de processamento (vertical) ou então, numa abordagem horizontal, aumentar o número de máquinas que irão responder às requisições.

Por falar em requisições, elas podem ser síncronas ou assíncronas. A primeira compreende àquelas em que o cliente faz a requisição e fica aguardando a resposta do servidor. Já a segunda, as requisições são resolvidas e entregues de acordo com a disponibilidade do servidor, não bloqueando o processo.

Os principais pontos negativos do uso da arquitetura n-tier encontram-se na complexidade de manter o fluxo funcionando em máquinas distintas, o que nem é tão problemático assim e na necessidade de criar uma estratégia de tolerância a falhas para o caso de o ponto focal da implementação (servidor) parar de funcionar.

Como pontos positivos, além dos já mencionados, há a abordagem através de uma camada de aplicação ou de negócio entre os clientes e o servidor, para que uma mudança executada na camada mais baixa não exige uma alteração na camada mais alta; bastando apenas ajustar a camada de negócio. Além de contribuir com o desacoplamento e abstração entre os componentes.