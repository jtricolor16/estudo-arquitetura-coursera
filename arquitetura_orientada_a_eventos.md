# Arquitetura Orientada a Eventos

A arquitetura orientada a eventos é caracterizada como sistemas de invocações implícitas, ou seja, aplicações em que as funções não se comunicam diretamente. Este tipo arquitetural é baseado no paradigma preconizado pelo *event-driven design*.

O seu funcionamento compreende ao estabelecimento de duas camadas principais: as geradoras de eventos e as que irão consumí-los. Entre elas, há um controlador de eventos intitulado **event bus**. O interessante deste tipo de abordagem é que as funções não precisam ter conhecimento entre si. As funções geradoras de evento, a partir de um dado comportamento, irão enviar um aviso ao event bus que, ao receber este recado (através de mensagem, dado, ou qualquer tipo de valor) irá ativar uma função que fica esperando por aquele evento, de forma semelhante ao padrão de projeto observer. Um mesmo componente pode ser um gerador de eventos como também um consumidor. Há baixo acoplamento entre as funcionalidades.

O proceso descrito acima, em muitos casos, faz com que o fluxo de execução de sistemas com este estilo arquitetural sejam executados de forma assíncrona. Com isso, há de se ter atenção quando um dado global é alterado por mais de uma função presente neste fluxo. Nesse caso, pode ocorrer *race condition*, que acontece quando duas ou mais funções desejam alterar um objeto ou variável ao mesmo tempo. Uma abordagem para resolver esse tipo de situação é utilizar um recurso chamado *semaphore*. Como o próprio nome sugere, basicamente valida se o dado a ser modificado está em uso. Se estiver, a função que está tentando alterar o seu valor entrará em modo de espera até que a modificação seja consolidada. Quando for finalizada, o semáforo indicará que aquela informação está pronta para uso e a próxima funcionalidade poderá alterá-la.

Este estilo arquitetural é muito usado em aplicações interativas. Inclusive, no próprio curso é apresentado um exemplo chamado *Cookie Clicker*, no qual diferentes tipos de interação podem invocar funcionalidades distintas. Tudo sendo controlado pelo event bus.
